
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Dashboard | TEAM IOTREE MINDS </title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/admin/1-4-5/vendor/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/admin/1-4-5/vendor/font-awesome/css/font-awesome.min.css">
    <!-- Fontastic Custom icon font-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/admin/1-4-5/css/fontastic.css">
    <!-- Google fonts - Poppins -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,700">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/admin/1-4-5/css/style.default.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/admin/1-4-5/css/custom.css">
    <!-- Favicon-->
    <link rel="shortcut icon" href="https://d19m59y37dris4.cloudfront.net/admin/1-4-5/img/favicon.ico">


    <script>
      window.Promise ||
        document.write(
          '<script src="https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js"><\/script>'
        )
      window.Promise ||
        document.write(
          '<script src="https://cdn.jsdelivr.net/npm/eligrey-classlist-js-polyfill@1.2.20171210/classList.min.js"><\/script>'
        )
      window.Promise ||
        document.write(
          '<script src="https://cdn.jsdelivr.net/npm/findindex_polyfill_mdn"><\/script>'
        )
    </script>


    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>


    <script>
      // Replace Math.random() with a pseudo-random number generator to get reproducible results in e2e tests
      // Based on https://gist.github.com/blixt/f17b47c62508be59987b
      var _seed = 42;
      Math.random = function() {
        _seed = _seed * 16807 % 2147483647;
        return (_seed - 1) / 2147483646;
      };
    </script>

    <script>
  var lastDate = 0;
  var data = []
  var TICKINTERVAL = 86400000
  let XAXISRANGE = 777600000
  function getDayWiseTimeSeries(baseval, count, yrange) {
    var i = 0;
    while (i < count) {
      var x = baseval;
      var y = Math.floor(Math.random() * (yrange.max - yrange.min + 1)) + yrange.min;

      data.push({
        x, y
      });
      lastDate = baseval
      baseval += TICKINTERVAL;
      i++;
    }
  }

  getDayWiseTimeSeries(new Date('11 Feb 2017 GMT').getTime(), 10, {
    min: 10,
    max: 90
  })

  function getNewSeries(baseval, yrange) {
    var newDate = baseval + TICKINTERVAL;
    lastDate = newDate

    for(var i = 0; i< data.length - 10; i++) {
      // IMPORTANT
      // we reset the x and y of the data which is out of drawing area
      // to prevent memory leaks
      data[i].x = newDate - XAXISRANGE - TICKINTERVAL
      data[i].y = 0
    }

    data.push({
      x: newDate,
      y: Math.floor(Math.random() * (yrange.max - yrange.min + 1)) + yrange.min
    })
  }

  function resetData(){
    // Alternatively, you can also reset the data at certain intervals to prevent creating a huge series 
    data = data.slice(data.length - 10, data.length);
  }
  </script>


    <!-- Tweaks for older IEs--><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
  </head>
  <body>
    <div class="page">
      <!-- Main Navbar-->
      <header class="header" >
        <nav class="navbar" style="background-color: #2596be
        ;">
          <!-- Search Box-->
          <div class="search-box">
            <button class="dismiss"><i class="icon-close"></i></button>
            <form id="searchForm" action="#" role="search">
              <input type="search" placeholder="What are you looking for..." class="form-control">
            </form>
          </div>
          <div class="container-fluid" >
            <div class="navbar-holder d-flex align-items-center justify-content-between" style="height: 20px;">
              <!-- Navbar Header-->
              <div class="navbar-header" >
                <!-- Navbar Brand --><a href="index.html" class="navbar-brand d-none d-sm-inline-block">
                  <div class="brand-text d-none d-lg-inline-block" style="color: white;"><span></span><strong>TEAM IOTREE MINDS</strong></div>
                  <div class="brand-text d-none d-sm-inline-block d-lg-none" style="color: white;"><strong>TEAM IOTREE MINDS</strong></div></a>
                <!-- Toggle Button--><a id="toggle-btn" href="#" class="menu-btn active"><span></span><span></span><span></span></a>
              </div>
              <h2 class="no-margin-bottom col">Dashboard</h2>

              <!-- Navbar Menu -->
              <ul class="nav-menu list-unstyled d-flex flex-md-row align-items-md-center">
                
                <!-- Logout    -->
              <form action="/logout" >
                <button class="btn "  type="submit" style="background-color: #2596be; color: white; border-width: 2px; height: 18px; padding-top: 6px; margin-bottom: 35px;">
                <li class="nav-item"><a  class="nav-link logout" href="/logout"> <span class="d-none d-sm-inline">Logout</span><i class="fa fa-sign-out"></i></a></li>
                    </button>
              </form>
              </ul>
            </div>
          </div>
        </nav>
      </header>
      <div class="page-content d-flex align-items-eve"> 
        <!-- Side Navbar -->
        <nav class="side-navbar">
          <!-- Sidebar Header-->
          <div class="sidebar-header d-flex align-items-center">
            <div class="avatar"><img src="https://d19m59y37dris4.cloudfront.net/admin/1-4-5/img/avatar-1.jpg" alt="..." class="img-fluid rounded-circle"></div>
            <div class="title">
              <h1 class="h4">Doctor Name</h1>
              <p>Specialisation</p>
            </div>
          </div>
          <!-- Sidebar Navidation Menus--><span class="heading">Main</span>
          <ul class="list-unstyled">
            <li  style="background-color: #2596be; color: white;"><a href="dashboard"> <i class="icon-home"></i>Home </a></li>
            </ul>
        </nav>
        <div class="content-inner">
          <!-- Page Header-->
          <header class="page-header" >
            <div class="container-fluid">
              <div class="row">
                
               
                  <div class="col">
                  <div class="item  align-items-center">
                    
                      <div class="title">
                        <span>Temperature<br>Captured</span>
                          <div class="number"><strong id="temperature">- -</strong> F</div>
                        <div class="progress">
                          <div role="progressbar" style="width: 50%; height: 4px;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" class="progress-bar bg-violet"></div>
                        </div>
                      </div>
                    </div>
                </div>
                <div class="col">
                  <div class="item align-items-center">
                    <div class="title"><span>SP O2<br>Reading</span>
                        <div class="number"><strong id="spo2">- -</strong> %</div>
                      <div class="progress">
                        <div role="progressbar" style="width: 50%; height: 4px;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" class="progress-bar bg-red"></div>
                      </div>
                    </div>
  
                  </div>
                </div>
                <div class="col">
                  <div class="item  align-items-center">
                    
                    <div class="title"><span>Doctors <br> Active</span>
                        <div class="number"><strong>40</strong></div>
                      <div class="progress">
                        <div role="progressbar" style="width: 50%; height: 4px;" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" class="progress-bar bg-green"></div>
                      </div>
                    </div>
                    </div>
                </div>
                <div class="col">
                  <div class="item align-items-center">
                    <div class="title"><span>Open <br> Cases</span>
                        <div class="number"><strong>50</strong></div>
                      <div class="progress">
                        <div role="progressbar" style="width: 50%; height: 4px;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" class="progress-bar bg-orange"></div>
                      </div>
                    </div>
                  </div>
                </div>
            
               
              <button type="button" class="btn btn-danger float-right col w-25" >START <br> TESTING</button>
              </div>
              
            </div>
          </header>

          <!-- Dashboard Counts Section-->
          <section class="dashboard-counts no-padding">

            <div class="container-fluid" style="text-align: start;">
              <div class="row pb-0">
                <!-- <div id="chart" class="col-sm">
                </div> -->
                <div id="chartt" class="col-md" style="height: max-content; width:100%;"></div>
                <div class="col-md" style="height: max-content;" >
                  <img  src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRA7jKytJvEspjHt0Wgp3Xb7FvBfOiP45tm9A&usqp=CAU " style=" height: 300px; width: 100%; overflow-x: hidden; " >
                </img></div>
               
                 
                  
              
              </div>
              



                <!-- <div class="row bg-white has-shadow no-padding-top" style="margin-bottom: 30px;">
                 
                  <div class="col-xl-3 col-sm-6">
                    <div class="item d-flex align-items-center">
                      <div class="icon bg-violet"><i class="icon-user"></i></div>
                      <div class="title"><span>Temperature<br>Captured</span>
                          <div class="number"><strong id="temperature">- -</strong> F</div>
                        <div class="progress">
                          <div role="progressbar" style="width: 25%; height: 4px;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" class="progress-bar bg-violet"></div>
                        </div>
                      </div>

                    </div>
                  </div>
                 
                  <div class="col-xl-3 col-sm-6">
                      <div class="item d-flex align-items-center">
                        <div class="icon bg-violet"><i class="icon-user"></i></div>
                        <div class="title"><span>SP O2<br>Reading</span>
                            <div class="number"><strong id="spo2">- -</strong> %</div>
                          <div class="progress">
                            <div role="progressbar" style="width: 25%; height: 4px;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" class="progress-bar bg-violet"></div>
                          </div>
                        </div>

                      </div>
                    </div>
              
                  <div class="col-xl-3 col-sm-6">
                    <div class="item d-flex align-items-center">
                      <div class="icon bg-green"><i class="icon-bill"></i></div>
                      <div class="title"><span>Doctors<br>Active</span>
                          <div class="number"><strong>40</strong></div>
                        <div class="progress">
                          <div role="progressbar" style="width: 40%; height: 4px;" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" class="progress-bar bg-green"></div>
                        </div>
                      </div>

                    </div>
                  </div>
                 
                  <div class="col-xl-3 col-sm-6">
                    <div class="item d-flex align-items-center">
                      <div class="icon bg-orange"><i class="icon-check"></i></div>
                      <div class="title"><span>Open<br>Cases</span>
                          <div class="number"><strong>50</strong></div>
                        <div class="progress">
                          <div role="progressbar" style="width: 50%; height: 4px;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" class="progress-bar bg-orange"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div> -->

              </div>



          </section>

          <!-- <div id="chartt"></div> -->

          <!-- Page Footer-->
          <footer class="main-footer" style="background-color: #2596be;">
            <div class="container-fluid">
              <div class="row">
                <div class="container" style="text-align: center; ">
                  <p>All Rights Reserved, © 2021. Designed & developed by : Iotree Minds LLP</p>
                </div>
              </div>
            </div>
          </footer>
        </div>
      </div>

    <!-- JavaScript files-->
    <script src="https://d19m59y37dris4.cloudfront.net/admin/1-4-5/vendor/jquery/jquery.min.js"></script>
    <script src="https://d19m59y37dris4.cloudfront.net/admin/1-4-5/vendor/popper.js/umd/popper.min.js"> </script>
    <script src="https://d19m59y37dris4.cloudfront.net/admin/1-4-5/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://d19m59y37dris4.cloudfront.net/admin/1-4-5/vendor/jquery.cookie/jquery.cookie.js"> </script>
    <script src="https://d19m59y37dris4.cloudfront.net/admin/1-4-5/vendor/chart.js/Chart.min.js"></script>
    <script src="https://d19m59y37dris4.cloudfront.net/admin/1-4-5/vendor/jquery-validation/jquery.validate.min.js"></script>
    <script src="https://d19m59y37dris4.cloudfront.net/admin/1-4-5/js/charts-home.js"></script>
    <!-- Main File-->
    <script src="https://d19m59y37dris4.cloudfront.net/admin/1-4-5/js/front.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.6.3.min.js"></script>

  </body>

  <style>
    @import url(https://fonts.googleapis.com/css?family=Roboto);

body {
  font-family: Roboto, sans-serif;
}

#chart {
  max-width: 650px;
  margin: 35px auto;
}

  </style>


<script>
var ecg_data = 0;
    var client_id = Date.now();
    console.log("Initiated");
    var ws = new WebSocket("ws://10.60.2.245:8000/ws/"+client_id);
    console.log("Connected");
    var jsonData = {};
    ws.onmessage = function(event) {
        //var messages = document.getElementById('messages')
        //var message = document.createElement('li')
        //var content = document.createTextNode(event.data)
        //message.appendChild(content)
        //messages.appendChild(message)
        console.log(event.data)
        jsonData = JSON.parse(event.data)
        if(jsonData.clientId == 10949){
          console.log("GGGGGG")
          var spo2 = document.getElementById('spo2')
          var temp = document.getElementById('temperature')
          spo2.innerHTML = jsonData.spo2
          temp.innerHTML = jsonData.temp
          ecg_data = jsonData.ecg
          Plotly.extendTraces('chartt',{ y:[[ecg_data]]}, [0]);
                cnt++;
                if(cnt > 500) {
                    Plotly.relayout('chartt',{
                        xaxis: {
                            range: [cnt-500,cnt]
                        }
                    });
                }
          //data.append(jsonData.ecg);
        }
    };
    /*
    function sendMessage(event) {
        var input = document.getElementById("messageText")
        ws.send(input.value)
        input.value = ''
        event.preventDefault()
    }*/

</script>

<script>
            function getData() {
               return ecg_data;
            }

            Plotly.newPlot('chartt',[{
                y:[getData()],
                type:'line'
            }]);

            var cnt = 0;

            setInterval(function(){
                Plotly.extendTraces('chartt',{ y:[[getData()]]}, [0]);
                cnt++;
                if(cnt > 500) {
                    Plotly.relayout('chartt',{
                        xaxis: {
                            range: [cnt-500,cnt]
                        }
                    });
                }
            },0.001);
        </script>

  <script>

    var options = {
          series: [{
          data: data.slice()
        }],
          chart: {
          id: 'realtime',
          height: 350,
          type: 'line',
          animations: {
            enabled: true,
            easing: 'linear',
            dynamicAnimation: {
              speed: 1000
            }
          },
          toolbar: {
            show: true
          },
          zoom: {
            enabled: true
          }
        },
        dataLabels: {
          enabled: false
        },
        stroke: {
          curve: 'smooth'
        },
        title: {
          text: 'Real time Electro Cardio graph',
          align: 'left'
        },
        markers: {
          size: 0
        },
        xaxis: {
          type: 'count',
          range: XAXISRANGE,
        },
        yaxis: {
          max: 100
        },
        legend: {
          show: false
        },
        };

        var chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();

        window.setInterval(function () {
        getNewSeries(lastDate, {
          min: 10,
          max: 1000
        })
        chart.updateSeries([{
          data: data
        }])
      }, 1000)
  </script>

</html>